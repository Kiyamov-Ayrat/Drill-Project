# WellDesignCalc

Инструмент для автоматизированного расчёта конструкции нефтегазовых скважин на основе входных параметров и стандартов ГОСТ. Позволяет создавать и управлять несколькими скважинами, строить график совмещённых давлений, автоматически и вручную подбирать глубины и диаметры обсадных колонн, а также определять диаметры долот.

## Основные возможности

- Создание, просмотр, редактирование и удаление нескольких скважин
- Автоматический расчёт графика совмещённых давлений по входным данным
- Построение графика совмещённых давлений с помощью Matplotlib
- Автоматический подбор конструкции скважины на основе графика давлений:
  - количество обсадных колонн
  - глубины спуска
  - диаметры колонн
- Отдельный расчёт глубины кондуктора в зависимости от типа флюида (газ / нефть)
- Ручное добавление и удаление отдельных обсадных колонн
- Автоматический и ручной выбор диаметров долот и обсадных труб по ГОСТ
- Определение начального диаметра по дебиту скважины и типу флюида (согласно ГОСТ)
- Каскадное удаление — при удалении скважины автоматически удаляются все связанные данные
- Ввод данных как через автоматический расчёт (API), так и вручную
- Асинхронная обработка запросов

## Технологический стек

- **Backend**: Python, FastAPI
- **База данных**: PostgreSQL
- **ORM и миграции**: SQLAlchemy, Alembic
- **Визуализация**: Matplotlib
- **Асинхронность**: async/await

## Структура проекта
```
DrillProject/
├── migration/                  # Миграции базы данных (Alembic)
│   └── versions/               # Сгенерированные миграции
├── core/                       # Основные модули и конфигурация
│   └── config.py               # Настройки проекта (подключение к БД)
├── crud/                       # CRUD-операции
├── database/                   # Работа с базой данных
│   ├── init.py
│   └──data.py                 # Подключение к БД и инициализация таблиц
│         
├── models/                     # SQLAlchemy модели
│   ├── init.py
│   ├── bit_standard.py         # Стандарты долот (ГОСТ)
│   ├── casing_standard.py      # Стандарты обсадных труб
│   ├── construction_diameter.py# Диаметры конструкции
│   ├── data.py                 # Оснавная схема
│   ├── debit_standard.py       # Зависимости от дебита
│   ├── graph_pressure.py       # Модели для графика давлений
│   ├── pressure.py             # Давления
│   ├── well.py                 # Модель скважины
│   └── well_constraction.py    # Модель конструкции
├── routers/                    # Эндпоинты FastAPI (разделены по сущностям)
│             
├── schemas/                    # Pydantic-схемы (DTO)
│ 
├── utils/                      # Вспомогательные утилиты и расчёты
│   ├── calculations/           # Бизнес-логика и формулы
│   │   ├── init.py
│   │   ├── casing_diameter.py
│   │   ├── columns.py          # Расчет колонн
│   │   ├── db.py               # Вспомогательные функции для БД
│   │   ├── graph_pressure.py   # Расчет данных для графика
│   │   ├── well_construction.py# Расчет конструкции
│   │   └── ...                 # другие расчётные модули
│   └── graph/                  # Генерация графиков
│       ├── init.py
│       └── graph_pressure.py
├── .env                        # Переменные окружения (не в git)
├── .env.example                # Пример .env
├── .gitignore
├── alembic.ini                 # Конфигурация Alembic
├── main.py                     # Точка входа FastAPI
├── pyproject.toml              
├── requirements.txt            # Зависимости
└── README.md
```


## Установка

1. Клонируйте репозиторий

```bash
git clone https://github.com/Kiyamov-Ayrat/Drill-Project.git
cd DrillProject
```

2. Создайте и активируйте виртуальное окружение

```bash
python -m venv venv
source venv/bin/activate   # Linux/Mac
venv\Scripts\activate      # Windows
```

3. Установите зависимости

```bash
pip install -r requirements.txt
```

4. Настройте переменные окружения
Создайте файл .env в корне проекта и укажите:

```bash
DB_USER=Ваш ник
DB_PASSWORD=Ваш пароль
DB_HOST=адрес хоста (localhost)
DB_PORT=номер порта
DB_NAME=название БД
```

5. Выполните миграции и загрузите справочник ГОСТ

```bash
alembic upgrade head
```

6. Запустите приложение

```bash
uvicorn main:app --reload
```
API будет доступен по адресу: http://127.0.0.1:8000
Swagger-документация: http://127.0.0.1:8000/docs

## Текущий статус
Проект находится в активной разработке.
Уже реализован основной функционал по расчёту конструкции и визуализации графика совмещённых давлений.

## Планы развития
- Расчёт толщины стенок обсадных труб
- Учёт свойств бурового раствора по интервалам
- Ввод и учёт геологических характеристик интервалов
- Экспорт результатов в PDF/Excel
- Расширенная валидация входных данных

